<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <extension
         id="application"
         point="org.eclipse.core.runtime.applications">
      <application>
         <run
               class="wisoft.pack.app.Application">
         </run>
      </application>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            name="RCP Perspective"
            class="wisoft.pack.app.Perspective"
            id="WiosftUpdatePack.perspective">
      </perspective>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <view
            name="更新包列表"
            allowMultiple="true"
            class="wisoft.pack.views.NavigationView"
            id="WiosftUpdatePack.navigationView">
      </view>
      <view
            class="wisoft.pack.views.UnPackNavigation"
            id="wisoft.pack.views.UnPackNavigation"
            name="更新包列表">
      </view>
      <view
            class="wisoft.pack.views.PackNavigation"
            id="WisoftUpdatePack.packnavigation"
            name="更新包列表"
            restorable="true">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="wisoft.pack.handlers.CreateNewPackHandler"
            id="WiosftUpdatePack.add"
            name="新建更新包">
      </command>
      <command
            id="WiosftUpdatePack.remove"
            name="删除更新包">
      </command>
      <command
            id="WiosftUpdatePack.export"
            name="导出更新包">
      </command>
      <command
            id="WiosftUpdatePack.save"
            name="保存更新包">
      </command>
      <command
            defaultHandler="wisoft.pack.handlers.PackConfigHandler"
            id="WiosftUpdatePack.packconfig"
            name="配置选项">
      </command>
      <command
            defaultHandler="wisoft.pack.handlers.OpenPackHandler"
            id="WiosftUpdatePack.open"
            name="打开更新包">
      </command>
      <command
            id="WiosftUpdatePack.deploy"
            name="部署更新包">
      </command>
      <command
            id="WiosftUpdatePack.createclass"
            name="新建分类">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="WiosftUpdatePack.add"
            schemeId="WiosftUpdatePack.scheme1"
            sequence="CTRL+1">
      </key>
      <key
            commandId="org.eclipse.ui.file.exit"
            schemeId="WiosftUpdatePack.scheme1"
            sequence="ALT+X">
      </key>
      <key
            commandId="WiosftUpdatePack.remove"
            schemeId="WiosftUpdatePack.scheme1"
            sequence="CTRL+D">
      </key>
      <key
            commandId="WiosftUpdatePack.save"
            schemeId="WiosftUpdatePack.scheme1"
            sequence="CTRL+5">
      </key>
      <key
            commandId="WiosftUpdatePack.packconfig"
            schemeId="WiosftUpdatePack.scheme1"
            sequence="CTRL+P">
      </key>
      <scheme
            id="WiosftUpdatePack.scheme1"
            name="wisoftschema"
            parentId="org.eclipse.ui.defaultAcceleratorConfiguration">
      </scheme>
      <key
            commandId="WiosftUpdatePack.export"
            schemeId="WiosftUpdatePack.scheme1"
            sequence="CTRL+E">
      </key>
      <key
            commandId="WiosftUpdatePack.open"
            schemeId="WiosftUpdatePack.scheme1"
            sequence="CTRL+O">
      </key>
      <key
            commandId="WiosftUpdatePack.deploy"
            schemeId="WiosftUpdatePack.scheme1"
            sequence="CTRL+U">
      </key>
   </extension>
   <extension
         id="product"
         point="org.eclipse.core.runtime.products">
      <product
            application="WiosftUpdatePack.application"
            name="中科更新包管理工具">
 		 <property
          name="aboutText"
          value="中科更新包管理工具 v1.0.3&#x0A;更新记录:&#x0A;                BUG:&#x0A;                1、修改选择文件的树项目无法一次选中的BUG&#x0A;                2、修改打包文件配置树中删除项后，实际文件未删除的BUG&#x0A;                3、修改如果不编写SQL语句，直接导出更新包，报空指针的BUG&#x0A;                4、修改配置后，updateinfo.xml刷新不及时的BUG&#x0A;                &#x0A;                改进:&#x0A;                1、增加导出时自动生成版本语句&#x0A;                2、增加环境配置选项&#x0A;                3、重新定义快捷键操作&#x0A;                4、修改选择构建服务目录的对话框，使其直接展示树&#x0A;                5、增加更新说明">
         </property>
         <property
               name="aboutImage"
               value="product_lg_bak.bmp">
         </property>
         <property
               name="windowImages"
               value="icons/wi_updatetool.ico">
         </property>
         <property
               name="appName"
               value="中科更新包管理工具">
         </property>
         <property
               name="preferenceCustomization"
               value="plugin_customization.ini">
         </property>
         <property
               name="startupForegroundColor"
               value="FF0000">
         </property>
         <property
               name="startupMessageRect"
               value="7,227,539,20">
         </property>
         <property
               name="startupProgressRect"
               value="5,247,539,15">
         </property>
         
      </product>
   </extension>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="wisoft.pack.edits.PackInfoEditor"
            id="wisoft.pack.edits.PackInfoEditor"
            name="New PackInfoEditor">
      </editor>
   </extension>
   <extension
         point="org.eclipse.ui.console.consoleFactories">
   </extension>
   <extension
         point="org.eclipse.ui.navigator.viewer">
      <viewer
            popupMenuId="WisoftUpdatePack.packnavigation"
            viewerId="WisoftUpdatePack.packnavigation">
         <options>
            <property
                  name="org.eclipse.ui.navigator.hideLinkWithEditorAction"
                  value="false">
            </property>
         </options>
      </viewer>
      <viewerContentBinding
            viewerId="WisoftUpdatePack.packnavigation">
         <includes>
            <contentExtension
                  isRoot="false"
                  pattern="wisoft.pack.PackNavigator">
            </contentExtension>
         </includes>
      </viewerContentBinding>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.navigatorContent">
      <navigatorContent
            activeByDefault="true"
            contentProvider="wisoft.pack.models.PackInfoContentProvider"
            id="wisoft.pack.PackNavigator"
            labelProvider="wisoft.pack.models.PackInfoLabelProvider"
            name="PackNavigator"
            priority="normal">
         <triggerPoints>
            <or>
               <instanceof
                     value="wisoft.pack.models.PackFolderModel">
               </instanceof>
               <instanceof
                     value="wisoft.pack.models.PackInfoModel">
               </instanceof>
            </or>
         </triggerPoints>
         <possibleChildren>
            <or>
               <instanceof
                     value="wisoft.pack.models.PackFolderModel">
               </instanceof>
               <instanceof
                     value="wisoft.pack.models.PackInfoModel">
               </instanceof>
            </or>
         </possibleChildren>
      </navigatorContent>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="WiosftUpdatePack.toolbar1">
            <command
                  commandId="WiosftUpdatePack.add"
                  icon="icons/add.gif"
                  label="新建更新"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="wisoftupdatepack.isopr">
                     <equals
                           value="true">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="WiosftUpdatePack.export"
                  icon="icons/export.png"
                  label="导出更新"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="wisoftupdatepack.isopr">
                     <equals
                           value="true">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="WiosftUpdatePack.remove"
                  icon="icons/del.png"
                  label="删除更新"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="wisoftupdatepack.isopr">
                     <equals
                           value="true">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <separator
                  name="WiosftUpdatePack.separator1"
                  visible="true">
            </separator>
            <command
                  commandId="WiosftUpdatePack.open"
                  icon="icons/open.png"
                  label="打开更新"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="wisoftupdatepack.isopr">
                     <equals
                           value="false">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="WiosftUpdatePack.deploy"
                  icon="icons/deploy.png"
                  label="部署"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="wisoftupdatepack.isopr">
                     <equals
                           value="false">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <separator
                  name="WiosftUpdatePack.separator2"
                  visible="true">
            </separator>
            <command
                  commandId="WiosftUpdatePack.packconfig"
                  icon="icons/properties.png"
                  style="push">
            </command>
         </toolbar>
      </menuContribution>
      <menuContribution
            locationURI="toolbar:WisoftUpdatePack.packnavigation">
         <command
               commandId="WiosftUpdatePack.createclass"
               icon="icons/add.gif"
               style="push">
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="wisoft.pack.handlers.ExportPackHandler"
            commandId="WiosftUpdatePack.export">
         <enabledWhen>
            <and>
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <instanceof
                        value="wisoft.pack.models.PackInfoModel">
                  </instanceof>
               </iterate></and>
         </enabledWhen>
      </handler>
      <handler
            class="wisoft.pack.handlers.DeletePackHandler"
            commandId="WiosftUpdatePack.remove">
         <enabledWhen>
            <or>
               <and>
                  <count
                        value="1">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="wisoft.pack.models.PackInfoModel">
                     </instanceof>
                  </iterate>
               </and>
            </or>
         </enabledWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.linkHelper">
      <linkHelper
            class="wisoft.pack.views.NavigationLinkHelper"
            id="WiosftUpdatePack.linkHelper1">
         <editorInputEnablement>
            <instanceof
                  value="wisoft.pack.edits.PackInfoInput">
            </instanceof></editorInputEnablement>
         <selectionEnablement>
            <instanceof
                  value="wisoft.pack.models.PackInfoModel">
            </instanceof>
         </selectionEnablement>
      </linkHelper>
   </extension>
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="WiosftUpdatePack.perspective">
         <hiddenToolBarItem
               id="org.eclipse.ui.edit.text.actionSet.annotationNavigation">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.edit.text.gotoLastEditPosition">
         </hiddenToolBarItem>
      </perspectiveExtension>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="wisoft.pack.sourceprovider.AbstractSourceProvider">
         <variable
               name="wisoftupdatepack.isopr"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>

</plugin>
